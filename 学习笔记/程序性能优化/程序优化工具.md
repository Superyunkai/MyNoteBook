## heaptrack
1. 作用
    追踪所有的内存分配，并且标记该事件。
    + 发现内存优化的热点
    + 发现内存泄露
    + 找到程序中大量申请内存的点
    + 找到临时分配内存，随机就释放的地方
2. 用法
    (1) 对一个进程从开始到结束整个周期进行监控: heaptrack ./application, 日志生成在/tmp/heaptrack.APP.PID.gz
    (2) 对正在进行的进程进行监控， heaptrack --pid $(pid of your application)
    (3) 使用heaptrack_gui 和heaptrack_print分析结果

3. 构建
    heaptrack 分为数据收集heaptrack和分析UI程序heaptrack_gui,两者可以独立构建
    (1) 环境依赖
    ```
        cmake 2.8.9 or higher
        a C++11 enabled compiler like g++ or clang++
        zlib
        optionally: zstd for faster (de)compression
        libdl
        pthread
        libc

        # only heaptrack
        boost 1.41
        libunwind

        # only heaptrack_gui
        extra-cmake-modules
        Qt 5.2及以上
        KDE Frameworks 5
    ```
    (2) compiling
    ```
        cd heaptrack # i.e. the source folder
        mkdir build
        cd build
        cmake -DCMAKE_BUILD_TYPE=Release .. # look for messages about missing dependencies!
        make -j$(nproc)

        #mac os
        rew install qt@5

        # prepare tap
        brew tap kde-mac/kde https://invent.kde.org/packaging/homebrew-kde.git
        "$(brew --repo kde-mac/kde)/tools/do-caveats.sh"

        # install dependencies
        brew install kde-mac/kde/kf5-kcoreaddons kde-mac/kde/kf5-kitemmodels kde-mac/kde/kf5-kconfigwidgets \
                    kde-mac/kde/kf5-kio kde-mac/kde/kdiagram \
                    kde-extra-cmake-modules kde-ki18n kde-threadweaver \
                    boost zstd gettext

        # run manual steps as printed by brew
        ln -sfv "$(brew --prefix)/share/kf5" "$HOME/Library/Application Support"
        ln -sfv "$(brew --prefix)/share/knotifications5" "$HOME/Library/Application Support"
        ln -sfv "$(brew --prefix)/share/kservices5" "$HOME/Library/Application Support"
        ln -sfv "$(brew --prefix)/share/kservicetypes5" "$HOME/Library/Application Support"
    ```

