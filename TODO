
01-28:
  ✔ 增值小程序通道登记，提醒计旭敏 @done(23-01-28 09:34)
  ✔ 自动化测试完成自测和代码提交 @done(23-01-31 19:15)
  ✔ 认证过了OTC场外基金代码提交merge @done(23-01-28 09:34)

01-31:
  ☐ 调研订阅监控的可行性并验证
  ✔ 认证升级任务提交 @done(23-01-31 10:39)
  ✔ db服务器日志输出优化 @done(23-02-01 13:25)
    -- 需要进行性能测试

02-01:
  ✔ db服务器日志性能优化测试 @done(23-02-01 13:26)
    --- 使用QueueListener的多线程解决方案并没有显著效果
    --- 使用memoryHandler的得到了一定的提升,从3500到了5000
    --- socketHandler的方案过于复杂,不适合使用
  ✔ route 提交升级任务 @done(23-02-01 15:22)
  ✔ 调研订阅监控的可行性并验证 @done(23-02-02 16:55)
    --- client list 命令获取客户端列表,通过脚本定时执行的方式,检查是否存在客户端断连
        + 优势：便于实现,无需改动认证
        + 缺点：误报多(程序重启或者发布), 客户端很多时可能导致redis阻塞，告警信息少
    --- 收到推送消息时设置key,过期时间60s, 脚本每隔65s检查键值不存在则告警
        + 优势：更加精确
        + 缺点：改动大
    ---- 结论：暂时先加监控

02-02:
  ✔ 认证订阅丢失排查 @done(23-02-08 09:40)
    --- 未定位到根本原因,先在可疑的位置增加日志

02-08:
  ✔ 认证订阅丢失,redis参数调整 @done(23-02-14 10:11)
    ---
    手机主站年前发现1月12号hwy北vip站点认证丢失了对redis频道的订阅，但是连接未断开。2.3号运维调整db站点cpu配置后认证也发生了丢失订阅的问题，经过排查，2.3号在机器重启的时间内，自选股同步程序停止消费kafka，导致kafka堆积了较多的消息，当同步程序重新启动后，写入大量数据到redis中导致订阅的缓存打到限制，redis停止向客户端发送订阅消息，但是由于未配置tcp-keepalive参数，连接会保持。
    故修改tcp-keepalive参数，打开redis心跳机制，在缓冲区达到限制后redis会关闭和客户端的连接，由认证进行重新连接并重订阅。并修改缓冲区参数，减少发生的概率
  ✔ 认证支持转正配置文件修改 @done(23-02-08 13:43)
  
  ☐ 自动化测试升级release包打好
    --- 测试环境测试后再升级

  ✔ libfmt库整理 @done(23-02-14 10:11)

02-14:
  ✔ redis参数调整，和于学康确认上线计划 @started(23-02-14 10:14) @done(23-02-14 16:52) @lasted(6h38m14s)
  ✔ 模拟炒股转正出现userid不能继承的问题，找张贺确认 @started(23-02-14 10:14) @done(23-02-14 11:26) @lasted(1h12m13s)
  ☐ 自动化测试平台测试环境部署,预计下午开整 @started(23-02-14 16:52)
  ☐ 主站db同步监控、工具完善 @started(23-02-14 16:52)
02-16:
  ✔ 自选股同步问题 @done(23-02-20 09:06)
  ✔ 用户实时权限监控方案设计 @done(23-02-20 09:06)
  ✔ client自测 @done(23-02-20 09:06)
02-20:
  ✔ 演练文档完成 @done(23-02-20 16:59)
  ✔ 完善db程序日志 @done(23-02-20 16:59)
  ☐ 优化监控工具

02-24:
   ☐ 主站自动化测试优化速度(SJCGZZ-14800)  测试环境调试，预计下周发布 @started(23-02-24 11:06)
   ☐ 主站权限同步、自选股同步增加日志，增加链路监控(SJCGZZ-15366, SJCGZZ-15328, SJCGZZ-15302，SJCGZZ-15246(开发完成))  权限监控调整日志格式，接入ELK预计3月发布，自选股预计3月初处理 @started(23-02-24 11:06)
   ☐ 主站自选股协议放开(SJCGZZ-15352)   线上灰度中 @started(23-02-24 11:06)
   ☐ 认证增加自选股的强制刷新功能(SJCGZZ-15373)  下期认证带上预计3月初 @started(23-02-24 11:06)
   ☐ checkgw.sh脚本修复及功能增加(SJCGZZ-15375)   client下期发布带上，需要增加功能三月初 @started(23-02-24 11:06)
   ☐ 通行证灰度放开（SJCGZZ-14316) 认证通过升级发布的方式进行灰度，下下期认证预计三月初后 @started(23-02-24 11:06)
   ☐ 认证模块redis订阅机制优化（SJCGZZ-15167）   运维线上已经放开一台，下周一继续放开 @started(23-02-24 11:06)

02-27:
  ☐ 主站自动化测试优化速度(SJCGZZ-14800) 
    --调试中, Reading XML source '/root/mobile/mobirobot/tmp_tasks_dir/194415_subtask_id_1/7_PreMarketCheck.robot_10.10.81.85:9528_output.xml' failed: Incompatible XML element 'suite'.
  ☐ 主站权限同步、自选股同步增加日志，增加链路监控(SJCGZZ-15366, SJCGZZ-15328, SJCGZZ-15302，SJCGZZ-15246(开发完成))  权限监控调整日志格式，接入ELK预计3月发布，自选股预计3月初处理 @started(23-02-24 11:06)
  ☐ 主站自选股协议放开(SJCGZZ-15352)   线上灰度中 下期发布
  ☐ 认证增加自选股的强制刷新功能(SJCGZZ-15373)  23-02-28开发
  ☐ checkgw.sh脚本修复及功能增加(SJCGZZ-15375)   23-02-28开发
  ☐ 通行证灰度放开（SJCGZZ-14316) 下期发布
  ☐ 认证模块redis订阅机制优化（SJCGZZ-15167）   这周继续放开一台

02-28:
  ☐ 主站自动化测试优化速度(SJCGZZ-14800) 
  --调试中, Reading XML source '/root/mobile/mobirobot/tmp_tasks_dir/194415_subtask_id_1/7_PreMarketCheck.robot_10.10.81.85:9528_output.xml' failed: Incompatible XML element 'suite'.
  ✔ check_gw.sh脚本修改 @started(23-02-28 09:58) @done(23-03-01 16:09) @lasted(1d6h11m1s)
  ☐ 主站权限同步、自选股同步增加日志，增加链路监控(SJCGZZ-15366, SJCGZZ-15328, SJCGZZ-15302，SJCGZZ-15246(开发完成))  权限监控调整日志格式，接入ELK预计3月发布，自选股预计3月初处理 @started(23-02-24 11:06)
  ☐ 主站自选股协议放开(SJCGZZ-15352)   线上灰度中 下期发布
  ☐ 认证增加自选股的强制刷新功能(SJCGZZ-15373)  23-02-28开发
  ☐ checkgw.sh脚本修复及功能增加(SJCGZZ-15375)   23-02-28开发
  ☐ 通行证灰度放开（SJCGZZ-14316) 下期发布
  ☐ 认证模块redis订阅机制优化（SJCGZZ-15167）   这周继续放开一台

03-01:
  ✔ 主站自动化测试优化速度(SJCGZZ-14800) @done(23-03-01 16:06)
    --已经能够使用,单任务时会有mysql异常影响使用，后续排查
  ☐ check_gw.sh脚本修改 @started(23-02-28 09:58)
  ☐ 主站权限同步、自选股同步增加日志，增加链路监控(SJCGZZ-15366, SJCGZZ-15328, SJCGZZ-15302，SJCGZZ-15246(开发完成))  权限监控调整日志格式，接入ELK预计3月发布，自选股预计3月初处理 @started(23-02-24 11:06)
    ---sync_privileges 测试环境日志已经接入
  ☐ 主站自选股协议放开(SJCGZZ-15352)   线上灰度中 下期发布
  ☐ 认证增加自选股的强制刷新功能(SJCGZZ-15373)  23-02-28开发
  ☐ checkgw.sh脚本修复及功能增加(SJCGZZ-15375)   23-02-28开发
  ☐ 通行证灰度放开（SJCGZZ-14316) 下期发布
  ☐ 认证模块redis订阅机制优化（SJCGZZ-15167）   这周继续放开一台

  