 

​    

1. 通过跳板机登陆测试服务器以10.10.80.43为例
   1. 终端输入`cur1 ip:port/log0-info2` 来查看线上的info1日志。也可以配置为保存本地，保存的目录可配置，一般为：/hxapp/logs/sjzzlog/info1/yyyymmdd/mobigw_master_n.log	ip:手机主站的ip地址。	port：日志端口（测试服务器：10538，正式环境：87）	info1:日志级别，查看用户的请求和应答使用`user-[userConut]`	
2. 测试服务器上查看日志`cur1 '127.0.0.1:10528/log0-info1' `
3. 正式服务器上日志查看命令`cur1 '103.231.66.100:87/log0-user-8720123'`

日志格式：LOG:[总长度]：【系统起始运行时间】-【客户端sessionid】:【当前系统时间】：【请求还是回应包】：【日志信息:key=val】

日志内容的关键字使用了缩写,常用关键字的对应关系如下:

uid:账号的userid

hl:MiniHead的包头长度

pt:MiniHead的数据包id

ty:MiniHead的数据包类

pg:MiniHead的页面id

dl:MiniHead的数据包长度

lr=:MiniHead的上次请求应答时间和页面id，当前版本的关键字￿其中,高16位是时间,单位是毫秒,低16位是pageid

ft:请求包转发给哪个服务进程处理

fm:应答包是哪个模块返回（如hq1，hq2，wt1等）

fr:委托网关重发的次数

### 抓包工具

tcpdump(Linux)/Wireshark(windows)

### 终端登录工具：xshell